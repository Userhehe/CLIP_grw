<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.clip.gwr.model.mapper.PositionsDaoImpl">

<!-- 직책 등록 -->
<insert id="insertPositions" parameterType="java.util.Map">
	INSERT INTO CLIP.POSITIONS
	(POSITIONS_SEQ, POSITIONS_NAME, POSITIONS_REGDATE)
	VALUES('POSITIONS_' || TO_CHAR(POSITIONS_SEQ.NEXTVAL, 'FM000'),#{positions_name}, SYSTIMESTAMP)
</insert>
 
 <!-- 직책 수정 -->
 <insert id="updatePositions" parameterType="java.util.Map">
	 UPDATE CLIP.POSITIONS 
	SET POSITIONS_NAME  = #{positions_name}
	WHERE POSITIONS_SEQ  = #{positions_seq} 
	AND POSITIONS_SEQ  IN (
	    SELECT U.POSITIONS_SEQ
	    FROM CLIP.USERINFO U)
 </insert>
 
 <!-- 직책 삭제 -->
 <delete id="delPosition">
	 DELETE  FROM  POSITIONS   
	WHERE POSITIONS_SEQ = #{positions_seq} 
 </delete>
 
 <!-- 직책 검색  -->
 <select id="searchPosition" resultType="PositionsVo">
	 SELECT *
	FROM POSITIONS p 
	WHERE POSITIONS_NAME  LIKE '%' || #{positions_name} || '%
 </select>
 
 <!-- 직책명 중복 검색 -->
 <select id="duplicatePosItion" parameterType="java.lang.Integer">
	 SELECT COUNT(*)
	FROM POSITIONS  
	WHERE POSITIONS_NAME  = #{positions_name} ;
 </select>
</mapper>
