<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.clip.gwr.model.mapper.PaymentlineDaoImpl">

	<!-- 한 결재의 결재라인 정보를 가져오는 쿼리 -->
	<select id="getApprovalPayLine" resultType="PaymentlineVo" parameterType="java.lang.String">
		SELECT *
		FROM PAYMENTLINE p 
		WHERE APP_SEQ = #{app_seq}
		ORDER BY PAY_NUM 	
	</select>
	
	
	<!-- 결재를 신청할때 결재라인에 대한 정보가 같이 입력되는 쿼리 -->
  	<update id="putPayLine" parameterType="java.util.List">
		<foreach collection="list" item="item" open="INSERT ALL" separator=" " close="SELECT * FROM DUAL">
  			INTO PAYMENTLINE (APP_SEQ, PAY_USER ,PAY_NUM) VALUES
			( 'APPROVAL_' || TO_CHAR(APPROVAL_SEQ.CURRVAL) , #{item.pay_user}, #{item.pay_num} )
		</foreach>
  	</update>
  	
  	
  	
  	
  	
  	
  	
  	
</mapper>
