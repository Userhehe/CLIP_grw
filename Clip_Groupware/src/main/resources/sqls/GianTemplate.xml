<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.clip.gwr.model.mapper.GianDaoImpl">
	<select id="templateAll" resultType="GianVo">
	 SELECT GIAN_SEQ AS GIAN_SEQ,GIAN_NAME,
	GIAN_REGDATE  FROM GIAN ORDER BY GIAN_SEQ ASC
	</select>
	
	<!-- 즐겨찾기한 기안서 양식 리스트 조회 -->
	<select id="mySeletTemplate" resultType="GianVo">
		SELECT * <!-- GIAN_NAME -->
		FROM GIAN
		WHERE GIAN_SEQ IN (
		            SELECT GIAN_SEQ
		            FROM GIANMARK
		            WHERE USER_ID = #{user_Id}
		        )
		        ORDER BY GIAN_SEQ ASC
	</select>
	
	<!--조회 후 기안서 즐겨찾기 추가  -->
	<insert id="myInsert" parameterType="java.util.Map" >
		 INSERT INTO CLIP.GIANMARK
        (GM_SEQ, USER_ID, GIAN_SEQ)
        VALUES('GIANMARK_' || TO_CHAR(GIANMARK_SEQ.NEXTVAL, 'FM000'), #{user_id}, #{gian_Seq} )
	</insert>
	
	<!-- 조회 후 즐겨찾기한 기안서 양식 삭제 -->
	<delete id="myDel">
	DELETE FROM GIANMARK 
         WHERE GIAN_SEQ = #{gian_Seq} AND USER_ID = #{user_id}
	</delete>
	
	
	<select id="templateDetail" resultType="GianVo">
		SELECT GIAN_SEQ AS GIAN_SEQ, GIAN_GUBUN, 
		GIAN_MODIFIER , GIAN_REGDATE ,GIAN_HTML  
        FROM GIAN
  		  WHERE GIAN_SEQ = #{gian_seq}
	</select>
	
	
	<insert id="tempateInsert" parameterType="java.lang.String">
		<!-- <selectKey keyProperty="gian_seq" resultType="java.lang.Integer" order="BEFORE">
			SELECT GIAN_SEQ.NEXTVAL AS GIAN_SEQ FROM DUAL
		</selectKey> -->
		INSERT INTO GIAN
			(GIAN_SEQ, GIAN_GUBUN, GIAN_NAME, GIAN_MODIFIER, 
			 GIAN_REGDATE, GIAN_HTML)
			VALUES('GIAN_' || TO_CHAR(GIAN_SEQ.NEXTVAL, 'FM000'), #{gian_gubun}, #{gian_name},
			                #{gian_modifier} , LOCALTIMESTAMP, #{gian_html} )
	</insert>
	
	<update id="templateUpdate" parameterType="java.lang.String">
		UPDATE GIAN SET GIAN_HTML = #{gian_html}
        WHERE GIAN_SEQ = #{gian_seq}
	</update>
	
	<select id="templateNameSel" resultType="GianVo">
		SELECT GIAN_SEQ AS GIAN_SEQ,GIAN_NAME,GIAN_REGDATE  
        FROM GIAN
        WHERE GIAN_NAME LIKE '%' || #{gian_name} || '%'
	</select>
	
	<select id="templateGubunSel" resultType="GianVo">
	SELECT GIAN_GUBUN 
        FROM GIAN
	</select>
	
	<delete id="templateDelete">
		DELETE FROM GIAN WHERE GIAN_SEQ  = #{gian_seq}
	</delete>
	
	
	
	
</mapper>
