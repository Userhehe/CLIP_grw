<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:websocket="http://www.springframework.org/schema/websocket"
   xsi:schemaLocation="http://www.springframework.org/schema/websocket http://www.springframework.org/schema/websocket/spring-websocket-4.3.xsd
      http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd
      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd">
   
   <context:component-scan base-package="com.clip.gwr"/>
   <mvc:annotation-driven/>
   
   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix" value="/WEB-INF/views/"/>
      <property name="suffix" value=".jsp"/>
   </bean>
   
   <aop:aspectj-autoproxy/>
   
   <mvc:interceptors>
      <mvc:interceptor> 
         <!-- 인터셉터를 통해 로그인 세션 확인-->
         <mvc:mapping path="/**"/>
         <mvc:exclude-mapping path="/login/*"/>
         <mvc:exclude-mapping path="*/test/*"/>
         <mvc:exclude-mapping path="/loginForms.do"/>
         <mvc:exclude-mapping path="/loginForm.do"/>
         <mvc:exclude-mapping path="/sendCertnum.do"/>
         <mvc:exclude-mapping path="/checkCertnum.do"/>
         <mvc:exclude-mapping path="/updatePasswordForm.do"/>
         <mvc:exclude-mapping path="/accessError.do"/>
         <mvc:exclude-mapping path="/clipWs.do"/>
         <bean class="com.clip.gwr.interceptor.LoginCheckInterceptor"></bean>
      </mvc:interceptor>
   </mvc:interceptors>
   
   <tx:annotation-driven transaction-manager="transactionManager"/>
   
   

   <!-- 웹소켓 -->
<bean id="echoHandler" class="com.clip.gwr.socket.EchoHandler" />        
<websocket:handlers>
    <websocket:mapping handler="echoHandler" path="/clipWs.do"/>
    <websocket:handshake-interceptors>
        <bean class="org.springframework.web.socket.server.support.HttpSessionHandshakeInterceptor"/>
    </websocket:handshake-interceptors>
<!--     <websocket:sockjs /> -->
</websocket:handlers>   

</beans>
